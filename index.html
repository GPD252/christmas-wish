<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christmas Magic 2025</title>
    <link href="fonts.googleapis.com" rel="stylesheet">
    <style>
        body { 
            margin: 0; padding: 0; overflow: hidden; font-family: 'Dancing Script', cursive;
            background: linear-gradient(to bottom, #1e3c72, #2a5298, #f0f4f8); /* Heavenly Blue Gradient */
            height: 100vh; color: white; display: flex; align-items: center; justify-content: center;
        }
        #canvas { position: fixed; top: 0; left: 0; z-index: 1; pointer-events: none; }
        .container { position: relative; z-index: 10; text-align: center; width: 90%; max-width: 500px; }
        .page { display: none; background: rgba(255, 255, 255, 0.1); padding: 30px; border-radius: 20px; backdrop-filter: blur(10px); border: 2px solid #ffd700; animation: fadeIn 1.5s; }
        .active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        button { background: #ffd700; color: #001f3f; border: none; padding: 10px 25px; border-radius: 20px; font-size: 1.2rem; cursor: pointer; margin-top: 20px; }
        img { width: 100%; max-width: 250px; border-radius: 15px; margin-bottom: 15px; }
        input, textarea { width: 85%; padding: 10px; margin: 10px 0; border-radius: 10px; border: none; }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <audio id="bgMusic" loop src="www.soundhelix.com"></audio>

    <div class="container">
        <!-- SETUP: THE CREATOR PAGE -->
        <div id="setup" class="page active">
            <h1>Create the Magic</h1>
            <input type="text" id="inName" placeholder="Recipient Name">
            <textarea id="inMsg" placeholder="Your Sweet Message"></textarea>
            <input type="text" id="inImg" placeholder="Personal Photo Link (Direct URL)">
            <br><button onclick="generateLink()">Get Magic Link</button>
            <p id="linkOut" style="word-break: break-all; color: #ffd700; margin-top: 15px;"></p>
        </div>

        <!-- PAGE 1: SANTA ARRIVAL -->
        <div id="p1" class="page">
            <img src="pngimg.com" alt="Santa Sleigh">
            <h1>Ho Ho Ho!</h1>
            <p>Santa is flying through the ice rain just for you...</p>
            <button onclick="showPage('p2')">Next Scene →</button>
        </div>

        <!-- PAGE 2: REINDEER & FLOWERS -->
        <div id="p2" class="page">
            <img src="pngimg.com" alt="Reindeer">
            <h2 id="greetName">Merry Christmas</h2>
            <p>The reindeer have brought a special memory...</p>
            <button onclick="showPage('p3')">See the Surprise →</button>
        </div>

        <!-- PAGE 3: THE FINAL PHOTO & MESSAGE -->
        <div id="p3" class="page">
            <img id="greetImg" src="via.placeholder.com" style="border: 5px solid white;">
            <p id="greetMsg" style="font-size: 1.4rem;"></p>
            <button onclick="showPage('p1')">Watch Again</button>
        </div>
    </div>

    <script>
        // 1. URL LOGIC & SETUP
        const params = new URLSearchParams(window.location.search);
        if (params.has('to')) {
            showPage('p1');
            document.getElementById('greetName').innerText = "For You, " + params.get('to');
            document.getElementById('greetMsg').innerText = params.get('msg');
            if(params.get('img')) document.getElementById('greetImg').src = params.get('img');
            document.body.addEventListener('click', () => { document.getElementById('bgMusic').play(); }, {once: true});
        }

        function generateLink() {
            const name = encodeURIComponent(document.getElementById('inName').value);
            const msg = encodeURIComponent(document.getElementById('inMsg').value);
            const img = encodeURIComponent(document.getElementById('inImg').value);
            const link = window.location.origin + window.location.pathname + `?to=${name}&msg=${msg}&img=${img}`;
            document.getElementById('linkOut').innerHTML = `Copy & Send:<br><strong>${link}</strong>`;
        }

        function showPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        // 2. 3D-STYLE SNOWFALL CANVAS
        const cvs = document.getElementById('canvas');
        const ctx = cvs.getContext('2d');
        let flakes = [];
        function init() {
            cvs.width = window.innerWidth; cvs.height = window.innerHeight;
            flakes = Array.from({length: 100}, () => ({ x: Math.random()*cvs.width, y: Math.random()*cvs.height, r: Math.random()*3+1, s: Math.random()*2+1 }));
        }
        function draw() {
            ctx.clearRect(0,0,cvs.width,cvs.height);
            ctx.fillStyle = "white";
            ctx.beginPath();
            flakes.forEach(f => {
                ctx.moveTo(f.x, f.y); ctx.arc(f.x, f.y, f.r, 0, Math.PI*2);
                f.y += f.s; if(f.y > cvs.height) f.y = -10;
            });
            ctx.fill(); requestAnimationFrame(draw);
        }
        window.onresize = init; init(); draw();
    </script>
</body>
</html>
